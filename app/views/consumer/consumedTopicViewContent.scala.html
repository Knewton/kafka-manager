@*
* Copyright 2015 Yahoo Inc. Licensed under the Apache License, Version 2.0
* See accompanying LICENSE file.
*@
@import b3.vertical.fieldConstructor
@(cluster:String, consumer: String, topic: String, state: kafka.manager.ActorModel.ConsumedTopicState)

<div class="row">
    <div class="col-md-6">
        <div class="panel panel-default">
            <div class="panel-heading"><h4>Topic Summary</h4></div>
            <table class="table">
                <tbody>
                <tr>
                    <td>Total Lag</td>
                    <td>@state.totalLag.getOrElse(" ")</td>
                </tr>
                <tr>
                    <td>% of Partitions assigned to a consumer instance</td>
                    <td>@state.percentageCovered.getOrElse(" ")</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <div class="panel panel-default">
            <div class="panel-heading"><h4><a href="@routes.Topic.topic(cluster,topic)">@topic</a></h4></div>
            <table class="table">
                <thead>
                <tr><th>Partition</th><th>LogSize</th><th>Consumer Offset</th><th>Lag</th><th>Consumer Instance Owner</th></tr>
                </thead>
                <tbody>
                @for(tp:Int <- 0 until state.partitionOwners.keys.max) {
                <tr>
                    <td>@tp</td>
                    <td>@state.topicOffsets(tp).getOrElse(" ")</td>
                    <td>@state.partitionOffsets(tp)</td>
                    <td>@state.partitionLag(tp).getOrElse(" ") </td>
                    <td>@state.partitionOwners(tp)</td>
                </tr>
                }
                </tbody>
            </table>
        </div>
    </div>
</div>